# テキストコマンドテスト

## テスト目的
テキストベースのコマンドが正常に動作することを確認する

## 前提条件
- ボットが起動し、オンライン状態であること
- テストチャンネルに十分なメッセージ履歴があること
- テスト用アカウントに十分なメッセージ履歴があること
- Gemini APIが利用可能であること

## テストケース

### 1. 要約機能テスト

#### 通常の要約
1. `/要約` コマンドを実行
   
期待される動作:
- コマンド実行の確認メッセージ
- 要約結果の埋め込みメッセージ
- "処理が終了しました"メッセージ

#### サイレント要約
1. `/要約silent` コマンドを実行
   
期待される動作:
- 要約結果が実行者にのみ表示される
- 他のユーザーには見えない

### 2. 今北産業テスト

#### 通常の3行要約
1. `/今北産業` コマンドを実行

期待される動作:
- 3行要約結果の埋め込みメッセージ
- "処理が終了しました"メッセージ

#### サイレント3行要約
1. `/今北産業silent` コマンドを実行

期待される動作:
- 3行要約が実行者にのみ表示される
- 他のユーザーには見えない

### 3. MVP機能テスト

#### 通常のMVP選出
1. `/mvp` コマンドを実行
   
期待される動作:
- MVP選出結果の埋め込みメッセージ
- 選出された発言の表示
- "処理が終了しました"メッセージ

#### サイレントMVP
1. `/mvp_silent` コマンドを実行
   
期待される動作:
- MVP結果が実行者にのみ表示される
- 他のユーザーには見えない

### 4. 年齢推定テスト

#### 通常の年齢推定
1. `/年齢推定` コマンドを実行

期待される動作:
- 分析開始の確認メッセージ
- 年齢推定結果の埋め込みメッセージ
- "処理が終了しました"メッセージ

#### サイレント年齢推定
1. `/年齢推定silent` コマンドを実行

期待される動作:
- 推定結果が実行者にのみ表示される
- 他のユーザーには見えない

### 5. MBTI分析テスト

#### 通常のMBTI分析
1. `/性格分析mbti` コマンドを実行

期待される動作:
- 分析開始の確認メッセージ
- MBTI分析結果の埋め込みメッセージ
- 各タイプの説明が含まれていること
- "処理が終了しました"メッセージ

#### サイレントMBTI分析
1. `/性格分析mbti_silent` コマンドを実行

期待される動作:
- 分析結果が実行者にのみ表示される
- 他のユーザーには見えない

### 6. BIG5分析テスト

#### 通常のBIG5分析
1. `/性格分析big5` コマンドを実行

期待される動作:
- 分析開始の確認メッセージ
- BIG5分析結果の埋め込みメッセージ
- 各特性の詳細な説明
- "処理が終了しました"メッセージ

#### サイレントBIG5分析
1. `/性格分析big5_silent` コマンドを実行

期待される動作:
- 分析結果が実行者にのみ表示される
- 他のユーザーには見えない

## 確認項目

### 要約・今北産業機能
- [ ] 過去24時間のメッセージを正しく取得できる
- [ ] 要約が適切な長さで生成される
- [ ] 3行要約が適切な長さで生成される
- [ ] 埋め込みメッセージが正しく表示される
- [ ] サイレントモードが正しく機能する

### MVP機能
- [ ] 最も印象的な発言を選出できる
- [ ] 選出理由が明確に説明される
- [ ] 埋め込みメッセージが正しく表示される
- [ ] サイレントモードが正しく機能する

### 年齢推定機能
- [ ] ユーザーのメッセージを正しく収集できる
- [ ] 推定結果が適切なフォーマットで表示される
- [ ] サイレントモードが正しく機能する

### MBTI分析
- [ ] ユーザーのメッセージを正しく収集できる
- [ ] 分析結果が適切なフォーマットで表示される
- [ ] 各タイプの説明が分かりやすい
- [ ] サイレントモードが正しく機能する

### BIG5分析
- [ ] ユーザーのメッセージを正しく収集できる
- [ ] 5つの特性が適切に分析される
- [ ] 分析結果の説明が詳細である
- [ ] サイレントモードが正しく機能する

## エラーケース

1. メッセージ履歴不足
   - 適切なエラーメッセージが表示される
   - 最小必要メッセージ数の説明がある

2. API関連の問題
   - API制限到達時の処理
   - 接続エラー時の処理
   - タイムアウト時の処理

3. 特殊なメッセージ内容
   - 絵文字やスタンプが多用されている場合
   - URLやメディアが多い場合
   - 非テキストコンテンツが多い場合

4. 長時間の処理が必要な場合
   - タイムアウトが適切に処理されること
   - ユーザーに進行状況が表示されること

## パフォーマンス確認

- メッセージ収集の速度
- 分析処理の応答時間
- サーバー負荷への影響
- メモリ使用量

## 結果記録のポイント

### 機能面
- 分析結果の正確性
- 結果の一貫性
- 説明の分かりやすさ
- 生成された要約の質
- エラーメッセージの明確さ

### 技術面
- 処理速度
- エラーハンドリング
- リソース効率

### ユーザー体験
- コマンドの使いやすさ
- 結果の見やすさ
- プライバシーへの配慮
