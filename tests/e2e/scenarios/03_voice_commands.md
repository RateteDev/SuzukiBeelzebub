# ボイスコマンドテスト

## テスト目的
ボイスチャンネル関連の機能が正常に動作することを確認する

## 前提条件
- ボットが起動し、オンライン状態であること
- テスト用のボイスチャンネルが利用可能であること
- FFmpegが正しくインストールされていること

## テストケース

### 1. ボイスチャンネル参加テスト

1. テスターがボイスチャンネルに参加
2. `/vc参加` コマンドを実行

期待される動作:
- ボットがボイスチャンネルに参加
- 参加完了メッセージの表示
- ボットのアイコンがボイスチャンネルに表示

### 2. テキスト読み上げテスト

1. ボットが参加しているチャンネルでメッセージを送信

期待される動作:
- メッセージが音声に変換される
- 音声が適切な速度で再生される
- 20文字制限が正しく機能する

テストするメッセージパターン:
- 通常の日本語テキスト
- 英数字混じりのテキスト
- 絵文字を含むテキスト
- URLを含むテキスト
- メンションを含むテキスト

### 3. ボイスチャンネル退出テスト

#### 手動退出
1. `/vc退出` コマンドを実行

期待される動作:
- ボットがボイスチャンネルから退出
- 退出完了メッセージの表示

#### 自動退出
1. 全ユーザーがボイスチャンネルから退出

期待される動作:
- ボットが自動的にチャンネルから退出
- ログに退出記録が残る

## 確認項目

### ボイスチャンネル操作
- [ ] 参加コマンドが正常に動作する
- [ ] 退出コマンドが正常に動作する
- [ ] 自動退出機能が正常に動作する

### 音声変換
- [ ] テキストが正しく音声に変換される
- [ ] 音声の品質が適切である
- [ ] 再生速度が適切である
- [ ] 文字数制限が機能する

### メッセージクリーニング
- [ ] URLが適切に除去される
- [ ] 絵文字が適切に処理される
- [ ] メンションが適切に除去される

## エラーケース

1. ボイスチャンネル参加時
   - ユーザーがVCに未参加の場合
   - ボットの権限が不足している場合
   - 既に他のVCに参加している場合

2. 音声再生時
   - 長文メッセージの処理
   - 特殊文字を含むメッセージ
   - 高速な連続メッセージ

3. 接続問題
   - ネットワーク切断時の挙動
   - 音声品質低下時の挙動

## パフォーマンス確認

- 音声変換の応答時間
- 音声再生の遅延
- メモリ使用量
- CPU使用率

## 結果記録のポイント

- 音声品質の評価
- 応答性能の評価
- エラーハンドリングの適切さ
- リソース使用効率
